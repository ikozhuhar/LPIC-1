## 101.2 Загрузка системы

Чтобы управлять машиной, основной компонент операционной системы — ядро ​​— должен быть загружен загрузчиком, который в свою очередь загружается предустановленной прошивкой, такой как BIOS или UEFI. После загрузки, ядро ​​продолжает процесс загрузки, идентифицируя и настраивая оборудование. Наконец, ядро ​​вызывает утилиту, отвечающую за запуск и управление службами системы. Этой утилитой является - Init.

Процесс загрузки выглядит следующим образом:

1. BIOS/UEFI
2. MBR - первый этам загрузчика.
3. LILO/GRUB - второй этап загрузчика.
4. Linux Kernel - запуск ядра ОС.
5. Init - пользовательская среда.

## Инициализация операционной системы

Инициализация операционной системы начинается, когда загрузчик загружает ядро ​​в ОЗУ. Затем ядро ​​берет на себя управление ЦП и начинает обнаруживать и настраивать основные аспекты операционной системы, такие как базовая конфигурация оборудования и адресация памяти.

Затем ядро ​​открывает initramfs (_начальную файловую систему ОЗУ_). Initramfs — это архив, содержащий файловую систему, используемую как временная корневая файловая система во время процесса загрузки. Основное назначение файла `initramfs` — предоставить необходимые модули, чтобы ядро ​​могло получить доступ к «реальной» корневой файловой системе операционной системы.

Как только корневая файловая система станет доступна, ядро ​​смонтирует все файловые системы, настроенные в `/etc/fstab`, а затем выполнит первую программу — утилиту с именем `init`. Программа `init` отвечает за запуск всех скриптов инициализации и системных демонов. Существуют различные реализации таких системных инициаторов, помимо традиционного `init`, такие как `systemd` и `Upstart`. После загрузки программы `init initramfs` удаляется из оперативной памяти.

`Стандарт SysV`
Менеджер служб, основанный на стандарте SysVinit, контролирует, какие демоны и ресурсы будут доступны, используя концепцию уровней выполнения. Уровни выполнения пронумерованы от 0 до 6 и разработаны разработчиками дистрибутивов для выполнения определенных целей. Единственными определениями уровней выполнения, общими для всех дистрибутивов, являются уровни выполнения 0, 1 и 6.

`systemd`
systemd — это современный менеджер систем и служб с уровнем совместимости для команд и уровней выполнения SysV. systemd имеет параллельную структуру, использует сокеты и D-Bus для активации служб, выполнения демонов по требованию, мониторинга процессов с помощью cgroups, поддержки снимков, восстановления системных сеансов, управления точками монтирования и управления службами на основе зависимостей. В последние годы большинство основных дистрибутивов Linux постепенно приняли systemd в качестве своего системного менеджера по умолчанию.

`Upstart`
Как и systemd, Upstart является заменой init. Цель Upstart — ускорить процесс загрузки путем распараллеливания процесса загрузки системных служб. Upstart использовался в дистрибутивах на базе Ubuntu в прошлых выпусках, но сегодня уступил место systemd.
